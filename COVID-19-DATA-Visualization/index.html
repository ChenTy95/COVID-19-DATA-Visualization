<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <!-- 引入 ECharts 文件 -->
    <script src="js/jquery-1.8.0.js"></script>
    <script src="js/echarts.min.js"></script>
    <script src="map/china.js"></script>
</head>

<body>
    <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
    <div id="main" style="width: 800px; height:600px;"></div>

    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据
        option = {
            title: {
                text: 'COVID-19 疫情数据 - 累计确诊',
                subtext: '',
                left: 'center'
            },
            tooltip: {
                trigger: 'item'
            },
            visualMap: {
                min: 0,
                max: 10000,
                left: 'left',
                top: 'bottom',
                calculable: true
            },
            toolbox: {
                show: true,
                orient: 'vertical',
                left: 'right',
                top: 'center',
                feature: {
                    mark: { show: true },
                    dataView: { show: true, readOnly: false },
                    restore: { show: true },
                    saveAsImage: { show: true }
                }
            },
            series: [
                {
                    name: '累计确诊',
                    type: 'map',
                    mapType: 'china',
                    roam: false,
                    label: {
                        normal: {
                            show: true
                        },
                        emphasis: {
                            show: true
                        }
                    },
                    data: []
                }
            ]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);

        // 异步加载
        // $.ajax({
        //     method: "GET",
        //     url: "http://localhost:8684/COVID-19-DATA-WS.asmx/GetChinaProvincetDateData?date=2020-06-30&dataType=1",
        //     dataType: "json",
        //     success: function (data) {
        //         alert(data);
        //         myChart.setOption({
        //             title: {
        //                 subtext: '2020-06-30'
        //             },
        //             series: [{
        //                 data: data
        //             }]
        //         });
        //     }
        // });
        $.get('http://localhost:8684/COVID-19-DATA-WS.asmx/GetChinaProvincetDateData?date=2020-06-30&dataType=1').done(function (data) {
            alert(data);
            alert($(data).find('string[xmlns="http://tempuri.org/"]'));
            myChart.setOption({
                title: {
                    subtext: '2020-06-30'
                },
                series: [{
                    data: data
                }]
            });
        });
    </script>
</body>

</html>